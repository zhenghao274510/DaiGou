(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/shopdetails/shopDetails"],{1224:function(t,i,s){"use strict";var n=s("8287"),o=s.n(n);o.a},"26a3":function(t,i,s){"use strict";var n=function(){var t=this,i=t.$createElement;t._self._c;t._isMounted||(t.e0=function(i){i.stopPropagation(),t.showChoose=!1},t.e1=function(i){i.stopPropagation(),t.showChoose=!1})},o=[];s.d(i,"a",function(){return n}),s.d(i,"b",function(){return o})},"78f4":function(t,i,s){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(){return s.e("components/bbs-countdown/bbs-countdown").then(s.bind(null,"8c5f"))},o=function(){return s.e("components/uni-number-box/uni-number-box").then(s.bind(null,"8d53"))},e={components:{bbsCountDown:n,uniNumberBox:o},data:function(){return{showChoose:!1,current:0,currentSku1:0,currentSku2:0,count:1,isbuy:0,dataObj:{},productId:"",skuId:"",uid:"",type:0,content:"",isCollection:0,imgList:[],skuList:[],shunameList:[],choseSku:[],list:[],video:"",showDate:!1}},onShow:function(){this.uid=getApp().globalData.uid},computed:{stock:function(){if(void 0!=this.dataObj.skuList){var t=this.current;return this.dataObj.skuList[t].stock}}},onLoad:function(t){this.productId=t.id,this.initData()},methods:{choseItem:function(t,i){0==t?this.currentSku1=i:this.currentSku2=i;var s=this.currentSku1,n=this.currentSku2;for(var o in this.choseSku[0]=this.skuList[0][s],this.choseSku[1]=this.skuList[1][n],this.list)this.list[o].specification[0].value==this.choseSku[0].value&&this.list[o].specification[1].value==this.choseSku[1].value&&(this.current=o)},initData:function(){this.current=0,this.current=0,this.count=0,this.loadData()},auother:function(){this.$api.navTo("/pagesB/author/index")},canle:function(){this.$api.tip("取消")},numberChange:function(t){console.log(t);this.current;t.number>=this.stcok?(this.$api.tip("已达到最大!"),this.count=this.stcok):this.count=t.number},loadData:function(){var t=this,i={uid:this.uid,productId:this.productId};console.log(i),this._reqw.ipost(i,"productDetail").then(function(i){t.showDate=!0,console.log(i);var s=/\.mp4|\.rmb/;0==i.result?(t.dataObj=i,i.lbImageList.forEach(function(n,o){s.test(n)&&(i.lbImageList.splice(o,1),t.video=n)}),t.imgList=i.lbImageList,t.shunameList=i.shunameList,i.skuList.forEach(function(t){t.specification=JSON.parse(t.specification)}),t.list=i.skuList,t.skuList=t.formData(i.skuList),t.content=t.$api.formText(i.content),t.isCollection=i.isCollection):t.$api.tip(i.resultNote)}).catch(function(t){})},tellPhone:function(){this.$api.callPhone(this.phone)},toggleSpec:function(t){""==this.uid?this.$api.loginTip(this.auother,this.canle):(this.isbuy=t,0==t||1==t?this.showChoose=!0:this.activeBuy())},addCart:function(){var t=this;if(""==this.uid)this.$api.loginTip(this.auother,this.canle);else{var i={uid:this.uid,skuId:this.skuId,count:this.count};this._reqw.ipost(i,"addCart").then(function(i){0==i.reult?t.$api.tip("添加成功"):t.$api.tip(i.resultNote)}).catch(function(t){})}},formData:function(t){var i=this.shunameList,s=[],n=[];if(1==i.length)return s.push(t[0].specification[0]),console.log(s),this.choseSku=s,s;for(var o=0;o<t.length;o++)s.push(t[o].specification[0]),n.push(t[o].specification[1]);var e=this.formAry(s),u=this.formAry(n),c=[e,u];return this.choseSku[0]=c[0][0],this.choseSku[1]=c[1][0],c},formAry:function(t){for(var i=[],s={},n=0;n<t.length;n++)s[t[n].value]||(i.push(t[n]),s[t[n].value]=!0);return i},finishChose:function(){var t=this.current;this.showChoose=!1,this.skuId=this.dataObj.skuList[t].id,console.log(this.skuId),1==this.isbuy?this.addCart():this.activeBuy()},activeBuy:function(){var i=this.current,s=this.dataObj.skuList[i];s.id=this.productId,s.count=this.count,s.name=this.dataObj.name,s.point=this.dataObj.point;var n=[];n.push(s),console.log(n),t.setStorageSync("good",JSON.stringify(n)),t.setStorageSync("sku",JSON.stringify(this.choseSku)),this.$api.navTo("/pagesD/order/finishOrder?type=".concat(this.type,"&payType=0"))},toFavorite:function(){var t=this;if(""==this.uid)this.$api.loginTip(this.auother,this.canle);else{var i={uid:this.uid,productId:this.productId};this._reqw.ipost(i,"collectionOrCancel").then(function(i){0==i.result?(t.$api.tip("成功"),0==t.isCollection?t.isCollection=1:t.isCollection=0):t.$api.tip(i.resultNote)}).catch(function(t){})}},stopPrevent:function(){}}};i.default=e}).call(this,s("543d")["default"])},8287:function(t,i,s){},"8d9d":function(t,i,s){"use strict";s.r(i);var n=s("26a3"),o=s("e227");for(var e in o)"default"!==e&&function(t){s.d(i,t,function(){return o[t]})}(e);s("1224");var u=s("2877"),c=Object(u["a"])(o["default"],n["a"],n["b"],!1,null,"578f57e5",null);i["default"]=c.exports},cc06:function(t,i,s){"use strict";(function(t){s("275f"),s("921b");n(s("66fd"));var i=n(s("8d9d"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,s("543d")["createPage"])},e227:function(t,i,s){"use strict";s.r(i);var n=s("78f4"),o=s.n(n);for(var e in n)"default"!==e&&function(t){s.d(i,t,function(){return n[t]})}(e);i["default"]=o.a}},[["cc06","common/runtime","common/vendor"]]]);